<div class="register-layout">
      <header class="uniride-header">
        <div class="header-content">
          <div class="logo-container">
            <i class="fas fa-grip-lines-vertical pole"></i>
            <i class="fas fa-car-side car-icon"></i>
            <i class="fas fa-grip-lines-vertical pole"></i>
          </div>
          <h1 class="brand-name">UNIRIDE</h1>
        </div>
      </header>

      <div class="form-container">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">

          <div class="form-group">
            <input
              type="text"
              formControlName="nombre"
              placeholder="Nombre completo"
              [class.error-border]="isFieldInvalid('nombre')">
          </div>

          <div class="form-group">
            <input
              type="email"
              formControlName="correoInstitucional"
              placeholder="Correo universitario"
              [class.error-border]="isFieldInvalid('correoInstitucional')">
            @if (isFieldInvalid('correoInstitucional')) {
              <small class="error-text">Debe ser un correo @upc.edu.pe válido</small>
            }
          </div>

          <div class="form-row">
            <div class="form-group half">
              <input
                type="text"
                formControlName="dni"
                placeholder="DNI"
                maxlength="8"
                [class.error-border]="isFieldInvalid('dni')">
            </div>
            <div class="form-group half">
              <input
                type="text"
                formControlName="distrito"
                placeholder="Distrito"
                [class.error-border]="isFieldInvalid('distrito')">
            </div>
          </div>

          <div class="form-group">
            <input
              type="text"
              formControlName="carrera"
              placeholder="Carrera"
              [class.error-border]="isFieldInvalid('carrera')">
          </div>

          <div class="form-group">
            <input
              type="text"
              formControlName="telefono"
              placeholder="Teléfono"
              [class.error-border]="isFieldInvalid('telefono')">
          </div>

          <div class="form-group">
            <input
              type="password"
              formControlName="contrasena"
              placeholder="Contraseña"
              [class.error-border]="isFieldInvalid('contrasena')">
          </div>

          <div class="form-group role-group">
            <label>Quiero registrarme como:</label>
            <div class="role-options">
              <label class="radio-container">Pasajero
                <input type="radio" formControlName="rolActivo" value="PASAJERO">
                <span class="checkmark"></span>
              </label>
              <label class="radio-container">Conductor
                <input type="radio" formControlName="rolActivo" value="CONDUCTOR">
                <span class="checkmark"></span>
              </label>
            </div>
          </div>

          @if (errorMessage()) {
            <div class="alert-error">{{ errorMessage() }}</div>
          }

          <button type="submit" class="btn-submit" [disabled]="registerForm.invalid || loading()">
            @if (loading()) {
              <span>Registrando...</span>
            } @else {
              <span>Registrarse</span>
            }
          </button>

          <div class="login-link">
             ¿Ya tienes cuenta? <a routerLink="/auth/login">Inicia sesión aquí</a>
          </div>

        </form>
      </div>
    </div>
